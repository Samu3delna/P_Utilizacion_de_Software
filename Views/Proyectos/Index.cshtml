@* @using System.Security.Claims es implícito en .NET 6+ *@
@{
    ViewData["Title"] = "Página Principal";
}

<div class="text-center">

    @* ------------------------------------------------------------- *@
    @* SI EL USUARIO ESTÁ AUTENTICADO (Ha iniciado sesión) *@
    @* ------------------------------------------------------------- *@
    @if (User.Identity.IsAuthenticated)
    {
    <h2>¡Bienvenido al Gestor de Proyectos, @User.Identity.Name!</h2>

    @{
            // Obtener el rol que guardamos en el ClaimTypes.Role
            var rol = User.FindFirst(System.Security.Claims.ClaimTypes.Role)?.Value;
    }

    <p class="lead">Tu rol en el sistema es: <strong>@rol</strong></p>

    <hr />

    <h3>¿Qué deseas hacer?</h3>
    <p class="mt-3">
        <a asp-controller="Proyectos" asp-action="Index" class="btn btn-primary btn-lg">
            Ir a Mis Proyectos
        </a>

        @* Botón de Logout para conveniencia *@
        <form asp-controller="Account" asp-action="Logout" method="post" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-lg">
                Cerrar Sesión
            </button>
        </form>
    </p>
    }
    @* ------------------------------------------------------------- *@
    @* SI EL USUARIO NO ESTÁ AUTENTICADO (Anónimo) *@
    @* ------------------------------------------------------------- *@
    else
    {
    <h1 class="display-4">¡Bienvenido a P_Utilizacion_de_Software!</h1>
    <p class="lead">
        Por favor, inicia sesión o regístrate para comenzar a gestionar proyectos.
    </p>

    <div class="mt-4">
        <a asp-controller="Account" asp-action="Login" class="btn btn-success btn-lg">Iniciar Sesión</a>
        <a asp-controller="Account" asp-action="Register" class="btn btn-secondary btn-lg">Registrarse</a>
    </div>
    }
</div>